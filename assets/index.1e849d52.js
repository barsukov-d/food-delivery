import{Q as ta,_ as na}from"./header.49e47568.js";import{u as sa}from"./vue-i18n.runtime.esm-bundler.53e1aa22.js";import{u as V,c as la,j as J,S as N,a as j}from"./axios.dac49c53.js";import{Q as Z}from"./QSkeleton.15aaddf9.js";import{$ as L,c as oa,N as w,f as ia,S as Q,_ as ra,a as aa,Q as ca,u as da}from"./useCategories.dcc0dcc5.js";import{a0 as z,a1 as f,a5 as S,at as ea,a8 as T,a9 as W,a2 as I,a3 as B,au as ua,a7 as pa,f as h,a4 as c,F,a6 as q,aW as fa,r as G,aX as ma}from"./index.eae3a570.js";import{u as ga}from"./useProducts.705a8918.js";import{u as ba}from"./cart.cac68b30.js";import"./wait.354c5c21.js";import"./QAvatar.b3f4fc0b.js";function D(a=""){return`.${a.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}`}function Ca({swiper:a,extendParams:n,on:s,emit:i}){const r="swiper-pagination";n({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:e=>e,formatFractionTotal:e=>e,bulletClass:`${r}-bullet`,bulletActiveClass:`${r}-bullet-active`,modifierClass:`${r}-`,currentClass:`${r}-current`,totalClass:`${r}-total`,hiddenClass:`${r}-hidden`,progressbarFillClass:`${r}-progressbar-fill`,progressbarOppositeClass:`${r}-progressbar-opposite`,clickableClass:`${r}-clickable`,lockClass:`${r}-lock`,horizontalClass:`${r}-horizontal`,verticalClass:`${r}-vertical`,paginationDisabledClass:`${r}-disabled`}}),a.pagination={el:null,$el:null,bullets:[]};let g,C=0;function p(){return!a.params.pagination.el||!a.pagination.el||!a.pagination.$el||a.pagination.$el.length===0}function y(e,t){const{bulletActiveClass:u}=a.params.pagination;e[t]().addClass(`${u}-${t}`)[t]().addClass(`${u}-${t}-${t}`)}function m(){const e=a.rtl,t=a.params.pagination;if(p())return;const u=a.virtual&&a.params.virtual.enabled?a.virtual.slides.length:a.slides.length,l=a.pagination.$el;let o;const $=a.params.loop?Math.ceil((u-a.loopedSlides*2)/a.params.slidesPerGroup):a.snapGrid.length;if(a.params.loop?(o=Math.ceil((a.activeIndex-a.loopedSlides)/a.params.slidesPerGroup),o>u-1-a.loopedSlides*2&&(o-=u-a.loopedSlides*2),o>$-1&&(o-=$),o<0&&a.params.paginationType!=="bullets"&&(o=$+o)):typeof a.snapIndex!="undefined"?o=a.snapIndex:o=a.activeIndex||0,t.type==="bullets"&&a.pagination.bullets&&a.pagination.bullets.length>0){const d=a.pagination.bullets;let v,x,H;if(t.dynamicBullets&&(g=d.eq(0)[a.isHorizontal()?"outerWidth":"outerHeight"](!0),l.css(a.isHorizontal()?"width":"height",`${g*(t.dynamicMainBullets+4)}px`),t.dynamicMainBullets>1&&a.previousIndex!==void 0&&(C+=o-(a.previousIndex-a.loopedSlides||0),C>t.dynamicMainBullets-1?C=t.dynamicMainBullets-1:C<0&&(C=0)),v=Math.max(o-C,0),x=v+(Math.min(d.length,t.dynamicMainBullets)-1),H=(x+v)/2),d.removeClass(["","-next","-next-next","-prev","-prev-prev","-main"].map(M=>`${t.bulletActiveClass}${M}`).join(" ")),l.length>1)d.each(M=>{const k=L(M),_=k.index();_===o&&k.addClass(t.bulletActiveClass),t.dynamicBullets&&(_>=v&&_<=x&&k.addClass(`${t.bulletActiveClass}-main`),_===v&&y(k,"prev"),_===x&&y(k,"next"))});else{const M=d.eq(o),k=M.index();if(M.addClass(t.bulletActiveClass),t.dynamicBullets){const _=d.eq(v),U=d.eq(x);for(let O=v;O<=x;O+=1)d.eq(O).addClass(`${t.bulletActiveClass}-main`);if(a.params.loop)if(k>=d.length){for(let O=t.dynamicMainBullets;O>=0;O-=1)d.eq(d.length-O).addClass(`${t.bulletActiveClass}-main`);d.eq(d.length-t.dynamicMainBullets-1).addClass(`${t.bulletActiveClass}-prev`)}else y(_,"prev"),y(U,"next");else y(_,"prev"),y(U,"next")}}if(t.dynamicBullets){const M=Math.min(d.length,t.dynamicMainBullets+4),k=(g*M-g)/2-H*g,_=e?"right":"left";d.css(a.isHorizontal()?_:"top",`${k}px`)}}if(t.type==="fraction"&&(l.find(D(t.currentClass)).text(t.formatFractionCurrent(o+1)),l.find(D(t.totalClass)).text(t.formatFractionTotal($))),t.type==="progressbar"){let d;t.progressbarOpposite?d=a.isHorizontal()?"vertical":"horizontal":d=a.isHorizontal()?"horizontal":"vertical";const v=(o+1)/$;let x=1,H=1;d==="horizontal"?x=v:H=v,l.find(D(t.progressbarFillClass)).transform(`translate3d(0,0,0) scaleX(${x}) scaleY(${H})`).transition(a.params.speed)}t.type==="custom"&&t.renderCustom?(l.html(t.renderCustom(a,o+1,$)),i("paginationRender",l[0])):i("paginationUpdate",l[0]),a.params.watchOverflow&&a.enabled&&l[a.isLocked?"addClass":"removeClass"](t.lockClass)}function b(){const e=a.params.pagination;if(p())return;const t=a.virtual&&a.params.virtual.enabled?a.virtual.slides.length:a.slides.length,u=a.pagination.$el;let l="";if(e.type==="bullets"){let o=a.params.loop?Math.ceil((t-a.loopedSlides*2)/a.params.slidesPerGroup):a.snapGrid.length;a.params.freeMode&&a.params.freeMode.enabled&&!a.params.loop&&o>t&&(o=t);for(let $=0;$<o;$+=1)e.renderBullet?l+=e.renderBullet.call(a,$,e.bulletClass):l+=`<${e.bulletElement} class="${e.bulletClass}"></${e.bulletElement}>`;u.html(l),a.pagination.bullets=u.find(D(e.bulletClass))}e.type==="fraction"&&(e.renderFraction?l=e.renderFraction.call(a,e.currentClass,e.totalClass):l=`<span class="${e.currentClass}"></span> / <span class="${e.totalClass}"></span>`,u.html(l)),e.type==="progressbar"&&(e.renderProgressbar?l=e.renderProgressbar.call(a,e.progressbarFillClass):l=`<span class="${e.progressbarFillClass}"></span>`,u.html(l)),e.type!=="custom"&&i("paginationRender",a.pagination.$el[0])}function P(){a.params.pagination=oa(a,a.originalParams.pagination,a.params.pagination,{el:"swiper-pagination"});const e=a.params.pagination;if(!e.el)return;let t=L(e.el);t.length!==0&&(a.params.uniqueNavElements&&typeof e.el=="string"&&t.length>1&&(t=a.$el.find(e.el),t.length>1&&(t=t.filter(u=>L(u).parents(".swiper")[0]===a.el))),e.type==="bullets"&&e.clickable&&t.addClass(e.clickableClass),t.addClass(e.modifierClass+e.type),t.addClass(a.isHorizontal()?e.horizontalClass:e.verticalClass),e.type==="bullets"&&e.dynamicBullets&&(t.addClass(`${e.modifierClass}${e.type}-dynamic`),C=0,e.dynamicMainBullets<1&&(e.dynamicMainBullets=1)),e.type==="progressbar"&&e.progressbarOpposite&&t.addClass(e.progressbarOppositeClass),e.clickable&&t.on("click",D(e.bulletClass),function(l){l.preventDefault();let o=L(this).index()*a.params.slidesPerGroup;a.params.loop&&(o+=a.loopedSlides),a.slideTo(o)}),Object.assign(a.pagination,{$el:t,el:t[0]}),a.enabled||t.addClass(e.lockClass))}function E(){const e=a.params.pagination;if(p())return;const t=a.pagination.$el;t.removeClass(e.hiddenClass),t.removeClass(e.modifierClass+e.type),t.removeClass(a.isHorizontal()?e.horizontalClass:e.verticalClass),a.pagination.bullets&&a.pagination.bullets.removeClass&&a.pagination.bullets.removeClass(e.bulletActiveClass),e.clickable&&t.off("click",D(e.bulletClass))}s("init",()=>{a.params.pagination.enabled===!1?R():(P(),b(),m())}),s("activeIndexChange",()=>{(a.params.loop||typeof a.snapIndex=="undefined")&&m()}),s("snapIndexChange",()=>{a.params.loop||m()}),s("slidesLengthChange",()=>{a.params.loop&&(b(),m())}),s("snapGridLengthChange",()=>{a.params.loop||(b(),m())}),s("destroy",()=>{E()}),s("enable disable",()=>{const{$el:e}=a.pagination;e&&e[a.enabled?"removeClass":"addClass"](a.params.pagination.lockClass)}),s("lock unlock",()=>{m()}),s("click",(e,t)=>{const u=t.target,{$el:l}=a.pagination;if(a.params.pagination.el&&a.params.pagination.hideOnClick&&l&&l.length>0&&!L(u).hasClass(a.params.pagination.bulletClass)){if(a.navigation&&(a.navigation.nextEl&&u===a.navigation.nextEl||a.navigation.prevEl&&u===a.navigation.prevEl))return;const o=l.hasClass(a.params.pagination.hiddenClass);i(o===!0?"paginationShow":"paginationHide"),l.toggleClass(a.params.pagination.hiddenClass)}});const A=()=>{a.$el.removeClass(a.params.pagination.paginationDisabledClass),a.pagination.$el&&a.pagination.$el.removeClass(a.params.pagination.paginationDisabledClass),P(),b(),m()},R=()=>{a.$el.addClass(a.params.pagination.paginationDisabledClass),a.pagination.$el&&a.pagination.$el.addClass(a.params.pagination.paginationDisabledClass),E()};Object.assign(a.pagination,{enable:A,disable:R,render:b,update:m,init:P,destroy:E})}const ha={class:"flex justify-between items-center text-primary"},ya={class:"pl-4 uppercase font-bold text-xl"},$a={key:0},va=z({__name:"header",props:{header:{},subHeader:{},action:{},count:{}},setup(a){return(n,s)=>(f(),S("div",ha,[ea("h3",ya,T(n.header),1),n.subHeader?(f(),S("span",$a,T(n.subHeader),1)):W("",!0),n.action?(f(),I(ua,{key:1,class:"ui-button rounded-full",to:n.action.to,label:n.action.label,color:n.action.color?n.action.color:"primary",outline:"","no-caps":""},{default:B(()=>[pa("\xA0 "+T(n.count),1)]),_:1},8,["to","label","color"])):W("",!0)]))}}),_a=z({__name:"products",props:{category:{}},setup(a){const n=a,{products:s,fetchProductsLoadingSymbol:i,fetchProducts:r}=ga(),{t:g}=sa(),C=V(),p=ba(),y=[w,ia];return r({category_id:n.category.id}),(m,b)=>(f(),S(F,null,[h(va,{class:"mt-4",header:m.category.title,action:{to:{name:"category",params:{id:m.category.id}},label:c(g)("common.showAll")},count:c(s).length},null,8,["header","action","count"]),h(c(aa),{class:"mt-4 border-primary","slides-per-view":2.2,"space-between":4,modules:y,pagination:{clickable:!0},freeMode:!0},{default:B(()=>[c(C).is(c(i))?(f(),S(F,{key:0},q(5,(P,E)=>h(c(Q),{key:E},{default:B(()=>[h(Z,{class:"h-full rounded-4xl"})]),_:2},1024)),64)):(f(!0),S(F,{key:1},q(c(s),(P,E)=>(f(),I(c(Q),{class:"border border-slate-500 rounded-xl",key:E},{default:B(()=>[h(ra,{product:P,"set-count":c(p).getProductCount(P.id),onCount:A=>c(p).setProductCount(P.id,A),onAddProduct:b[0]||(b[0]=A=>c(p).addProduct(A)),onDecProduct:b[1]||(b[1]=A=>c(p).decProduct(A))},null,8,["product","set-count","onCount"])]),_:2},1024))),128))]),_:1})],64))}}),Ba={class:"absolute-top text-subtitle2 text-center"},xa=z({__name:"card",props:{banner:{}},setup(a){return(n,s)=>(f(),I(fa,{class:"my-card"},{default:B(()=>[h(ca,{class:"aspect-[22/9]",src:"https://cdn.quasar.dev/img/parallax2.jpg"},{default:B(()=>[ea("div",Ba,T(n.banner.text),1)]),_:1})]),_:1}))}});class ka extends Error{constructor(){super(),this.name="ErrorBadRequestBanners"}}class X extends Error{constructor(){super(),this.name="ErrorNotFoundBanners"}}const K=la(J("http://api.service.ru","banners")),Y={fetchBanners:async()=>{var a;try{return await K.get("",{validateStatus:s=>s===N.OK})}catch(n){throw n instanceof j.AxiosError&&((a=n==null?void 0:n.response)==null?void 0:a.status)===N.NOT_FOUND?new X:n}},getBanner:async a=>{var n,s;try{return await K.get(J(a.toString()),{validateStatus:r=>r===N.OK})}catch(i){throw i instanceof j.AxiosError&&((n=i==null?void 0:i.response)==null?void 0:n.status)===N.BAD_REQUEST?new ka:i instanceof j.AxiosError&&((s=i==null?void 0:i.response)==null?void 0:s.status)===N.NOT_FOUND?new X:i}}},Sa=()=>{const a=V(),n=G([]),s=Symbol("fetchCategories"),i=async()=>{try{a.start(s),n.value=await Y.fetchBanners()}catch(p){throw p}finally{a.end(s)}},r=G(),g=Symbol("getBanner");return{banner:r,banners:n,getBannerLoadingSymbol:g,fetchBannersLoadingSymbol:s,getBanner:async p=>{try{a.start(g),r.value=await Y.getBanner(p)}catch(y){throw y}finally{a.end(g)}},fetchBanners:i}},Pa=z({__name:"banners",setup(a){const n=V(),s=[w,Ca],{banners:i,fetchBanners:r,fetchBannersLoadingSymbol:g}=Sa(),C=G({spaceBetween:20,breakpoints:{640:{slidesPerView:2},768:{slidesPerView:3},1024:{slidesPerView:4.2}}});return r(),(p,y)=>(f(),I(c(aa),{class:"actions-banners","slides-per-view":1.2,"space-between":10,modules:s,pagination:{clickable:!1},breakpoints:c(C).breakpoints},{default:B(()=>[c(n).is(c(g))?(f(),S(F,{key:0},q(10,(m,b)=>h(c(Q),{key:b},{default:B(()=>[h(Z,{class:"my-3 h-40 aspect-[22/9]"})]),_:2},1024)),64)):(f(!0),S(F,{key:1},q(c(i),(m,b)=>(f(),I(c(Q),{key:b},{default:B(()=>[h(xa,{banner:m},null,8,["banner"])]),_:2},1024))),128))]),_:1},8,["breakpoints"]))}}),Ma=z({__name:"main-sliders",async setup(a){let n,s;const{categories:i,fetchCategories:r}=da();return[n,s]=ma(()=>r()),await n,s(),(g,C)=>(f(),S(F,null,[h(Pa),(f(!0),S(F,null,q(c(i),p=>(f(),I(_a,{key:p.id,category:p},null,8,["category"]))),128))],64))}}),qa=z({__name:"index",setup(a){return(n,s)=>(f(),I(ta,null,{default:B(()=>[h(na,{header:"\u0413\u043B\u0430\u0432\u043D\u0430\u044F"}),h(Ma)]),_:1}))}});export{qa as default};
