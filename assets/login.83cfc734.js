import{a1 as l,r as F,a2 as i,a5 as h,au as f,f as a,a7 as r,b4 as d,av as _,a_ as D,F as w,b5 as U,$ as C,w as x,a3 as B}from"./index.46815d5f.js";import{u as L}from"./quasar.esm.prod.6c1988c1.js";import{u as N}from"./useUsers.6b97cfc5.js";import"./axios.060bcb32.js";import"./wait.3fb3bf62.js";import"./QAvatar.7c05a6d7.js";import"./status-codes.44acab52.js";const V=f("h2",{class:"text-center font-bold"},"\u0412\u0445\u043E\u0434",-1),k=["onSubmit"],S=l({__name:"login",emits:["handleLoginUser"],setup(m,{emit:s}){const e=F({phoneNumber:"",password:""}),n=()=>{s("handleLoginUser",e.value)};return(p,o)=>(i(),h(w,null,[V,f("form",{onSubmit:D(n,["prevent"])},[a(d,{outlined:"",label:"\u041D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430",modelValue:r(e).phoneNumber,"onUpdate:modelValue":o[0]||(o[0]=u=>r(e).phoneNumber=u),rules:[u=>u&&u.length>0||"\u041F\u043E\u043B\u0435 \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E \u0434\u043B\u044F \u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F"],mask:"+#-###-###-##-##"},null,8,["modelValue","rules"]),a(d,{outlined:"",label:"\u041F\u0430\u0440\u043E\u043B\u044C",modelValue:r(e).password,"onUpdate:modelValue":o[1]||(o[1]=u=>r(e).password=u),rules:[u=>u&&u.length>0||"\u041F\u043E\u043B\u0435 \u043E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E \u0434\u043B\u044F \u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F"],type:"password",maxlength:"9"},null,8,["modelValue","rules"]),a(_,{class:"ui-button mx-0 mt-5 w-full",label:"\u0412\u043E\u0439\u0442\u0438",color:"primary",onClick:n,disabled:!r(e).phoneNumber||!r(e).password},null,8,["disabled"]),a(_,{class:"ui-button mt-5 w-full",to:{name:"registration"},label:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F",outline:"",color:"primary"})],40,k)],64))}}),v=l({__name:"login",setup(m){const{loginUser:s,fetchLoginUser:e}=N(),n=U(),p=t=>{e(t)},o=C(),u=L(),b=()=>{n.jwt=s.value.jwt,n.user=s.value.user,o.push({name:"profile"})},g=()=>{u.dialog({title:"\u041E\u0448\u0438\u0431\u043A\u0430",message:"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043B\u043E\u0433\u0438\u043D \u0438\u043B\u0438 \u043F\u0430\u0440\u043E\u043B\u044C"})};return x(()=>s.value,t=>{t&&(t.status===0&&b(),t.status===10&&g())},{immediate:!0}),(t,c)=>(i(),B(S,{onHandleLoginUser:c[0]||(c[0]=E=>p(E))}))}}),I=l({__name:"login",setup(m){return(s,e)=>(i(),B(v))}});export{I as default};
