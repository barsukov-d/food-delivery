import{c as l,j as w,a as c,u as y}from"./axios.060bcb32.js";import{S as s}from"./status-codes.44acab52.js";import{r as i}from"./index.46815d5f.js";class d extends Error{constructor(){super(),this.name="ErrorBadRequestProducts"}}class h extends Error{constructor(){super(),this.name="ErrorNotFoundProducts"}}const p=l(w("http://api.service.ru","products")),f={fetchProducts:async r=>{try{return await p.get("",{params:r,validateStatus:o=>o===s.OK})}catch(t){throw t instanceof c.AxiosError&&t?.response?.status===s.BAD_REQUEST?new d:t instanceof c.AxiosError&&t?.response?.status===s.NOT_FOUND?new h:t}},getProduct:async r=>{try{return await p.get(w(r.toString()),{validateStatus:o=>o===s.OK})}catch(t){throw t instanceof c.AxiosError&&t?.response?.status===s.BAD_REQUEST?new d:t instanceof c.AxiosError&&t?.response?.status===s.NOT_FOUND?new h:t}}},x=()=>{const r=y(),t=i([]),o=Symbol("fetchProducts"),P=async e=>{try{r.start(o),t.value=e.id&&!e.id.length?[]:await f.fetchProducts(e)}catch(a){throw a}finally{r.end(o)}},u=i(),n=Symbol("getProduct");return{product:u,products:t,fetchProducts:P,getProduct:async e=>{try{r.start(n),u.value=await f.getProduct(e)}catch(a){throw a}finally{r.end(n)}},getProductLoadingSymbol:n,fetchProductsLoadingSymbol:o}};export{x as u};
